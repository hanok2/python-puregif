# Warning: this script will DELETE files.

clear

rm -f test-in/corrupt.gif
rm -f test-out/*.data
rm -f test-out/*.gif

echo "=== Creating a corrupt test file ==="
python3 ~/git/file-corruptor/corruptor.py --count 16 test-in/wolf8.gif test-in/corrupt.gif
echo

echo "=== Decoding ==="
python3 gif.py -od test-in/triangle.gif test-out/triangle.data
python3 gif.py -od test-in/wolf1.gif test-out/wolf1.data
python3 gif.py -od test-in/wolf3.gif test-out/wolf3.data
python3 gif.py -od test-in/wolf4.gif test-out/wolf4.data
python3 gif.py -od test-in/wolf8.gif test-out/wolf8.data
python3 gif.py -od test-in/wolf8-lace.gif test-out/wolf8-lace.data
python3 gif.py -od test-in/doom.gif test-out/doom.data
python3 gif.py -od test-in/big.gif test-out/big.data
python3 gif.py -od test-in/anim.gif test-out/anim.data
python3 gif.py -od test-in/empty.data test-out/empty.data
python3 gif.py -od test-in/corrupt.gif test-out/corrupt.data
echo

echo "=== Verifying decoded files ==="
diff -q test-in/triangle.data test-out/triangle.data
diff -q test-in/wolf1.data test-out/wolf1.data
diff -q test-in/wolf3.data test-out/wolf3.data
diff -q test-in/wolf4.data test-out/wolf4.data
diff -q test-in/wolf8.data test-out/wolf8.data
diff -q test-in/wolf8.data test-out/wolf8-lace.data
diff -q test-in/doom.data test-out/doom.data
diff -q test-in/big.data test-out/big.data
diff -q test-in/anim.data test-out/anim.data
echo

echo "=== Encoding ==="
python3 gif.py -oe -w202 test-in/triangle.data test-out/triangle.gif
python3 gif.py -oe -w320 test-in/wolf1.data test-out/wolf1.gif
python3 gif.py -oe -w320 test-in/wolf3.data test-out/wolf3.gif
python3 gif.py -oe -w320 test-in/wolf4.data test-out/wolf4.gif
python3 gif.py -oe -w320 test-in/wolf8.data test-out/wolf8.gif
python3 gif.py -oe -w320 test-in/doom.data test-out/doom.gif
python3 gif.py -oe -w526 test-in/big.data test-out/big.gif
python3 gif.py -oe -w1 test-in/empty.data test-out/empty.gif
echo

echo "=== Source GIFs ==="
ls -lSr test-in/*.gif
echo

echo "=== Target GIFs ==="
ls -lSr test-out/*.gif
echo

echo "=== Note: also verify test-out/*.gif manually ==="
echo

