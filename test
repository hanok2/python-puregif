# Warning: this script will DELETE files.

clear

rm -f test-out/*.data
rm -f test-out/*.gif

echo "=== Creating a corrupt test file ==="
python3 ~/git/file-corruptor/corruptor.py --count 16 test-in/wolf8.gif test-out/corrupt.gif
echo

echo "=== Decoding/encoding invalid files ==="
python3 gif.py -od     test-in/empty.data   test-out/empty.data
python3 gif.py -od     test-out/corrupt.gif test-out/corrupt.data
python3 gif.py -oe -w1 test-in/empty.data   test-out/empty.gif
echo

rm -f test-out/*.gif

echo "=== Decoding ==="
python3 gif.py -od    test-in/100px.gif      test-out/100px.data
python3 gif.py -od    test-in/triangle.gif   test-out/triangle.data
python3 gif.py -od    test-in/wolf1.gif      test-out/wolf1.data
python3 gif.py -od    test-in/wolf2.gif      test-out/wolf2.data
python3 gif.py -od    test-in/wolf3.gif      test-out/wolf3.data
python3 gif.py -od    test-in/wolf4.gif      test-out/wolf4.data
python3 gif.py -od    test-in/wolf5.gif      test-out/wolf5.data
python3 gif.py -od    test-in/wolf6.gif      test-out/wolf6.data
python3 gif.py -od    test-in/wolf7.gif      test-out/wolf7.data
python3 gif.py -od -v test-in/wolf8.gif      test-out/wolf8.data
python3 gif.py -od    test-in/wolf8-lace.gif test-out/wolf8-lace.data
python3 gif.py -od -v test-in/doom.gif       test-out/doom.data
python3 gif.py -od -v test-in/photo.gif      test-out/photo.data
python3 gif.py -od    test-in/anim.gif       test-out/anim.data

#python3 gif.py -od -v test-in/10mpx.gif             test-out/10mpx.data
#python3 gif.py -od -v test-in/10mpx-nodictreset.gif test-out/10mpx-nodictreset.data
echo

echo "=== Verifying decoded files ==="
diff -q test-in/100px.data    test-out/100px.data
diff -q test-in/triangle.data test-out/triangle.data
diff -q test-in/wolf1.data    test-out/wolf1.data
diff -q test-in/wolf2.data    test-out/wolf2.data
diff -q test-in/wolf3.data    test-out/wolf3.data
diff -q test-in/wolf4.data    test-out/wolf4.data
diff -q test-in/wolf5.data    test-out/wolf5.data
diff -q test-in/wolf6.data    test-out/wolf6.data
diff -q test-in/wolf7.data    test-out/wolf7.data
diff -q test-in/wolf8.data    test-out/wolf8.data
diff -q test-in/wolf8.data    test-out/wolf8-lace.data
diff -q test-in/doom.data     test-out/doom.data
diff -q test-in/photo.data    test-out/photo.data
diff -q test-in/anim.data     test-out/anim.data

#diff -q test-in/10mpx.data test-out/10mpx.data
#diff -q test-in/10mpx.data test-out/10mpx-nodictreset.data
echo

rm -f test-out/*.data

echo "=== Encoding ==="
python3 gif.py -oe -w10     test-in/100px.data    test-out/100px.gif
python3 gif.py -oe -w202    test-in/triangle.data test-out/triangle.gif
python3 gif.py -oe -w320    test-in/wolf1.data    test-out/wolf1.gif
python3 gif.py -oe -w320    test-in/wolf2.data    test-out/wolf2.gif
python3 gif.py -oe -w320    test-in/wolf3.data    test-out/wolf3.gif
python3 gif.py -oe -w320    test-in/wolf4.data    test-out/wolf4.gif
python3 gif.py -oe -w320    test-in/wolf5.data    test-out/wolf5.gif
python3 gif.py -oe -w320    test-in/wolf6.data    test-out/wolf6.gif
python3 gif.py -oe -w320    test-in/wolf7.data    test-out/wolf7.gif
python3 gif.py -oe -w320 -v test-in/wolf8.data    test-out/wolf8.gif
python3 gif.py -oe -w320 -v test-in/doom.data     test-out/doom.gif
python3 gif.py -oe -w526 -v test-in/photo.data    test-out/photo.gif

#python3 gif.py -oe -w5000 -v                 test-in/10mpx.data test-out/10mpx.gif
#python3 gif.py -oe -w5000 -v --no-dict-reset test-in/10mpx.data test-out/10mpx-nodictreset.gif
echo

echo "=== Source GIFs ==="
ls -lSr test-in/*.gif
echo

echo "=== Target GIFs (note: also verify them manually) ==="
ls -lSr test-out/*.gif
echo

